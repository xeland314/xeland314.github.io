---
import BlogPostLayout from "../../../layouts/BlogPostLayout.astro";
import RadiographyHeader from "../../../components/blog/RadiographyHeader.astro";
import RadiographyLegend from "../../../components/blog/RadiographyLegend.astro";
import PostFooterBar from "../../../components/blog/PostFooterBar.astro";

const title = "Python 3.14 Evoluci√≥n";
const description =
  "Radiograf√≠a: PEP 750 - Template Strings vs F-Strings. f-strings para rapidez, t-strings para seguridad.";
---

<BlogPostLayout
  title={title}
  description={description}
  bgColor="bg-slate-950"
  extraFonts="&family=Fira+Code:wght@400;600"
  lang="es"
>
  <div
    class="relative p-8 md:p-16 flex flex-col text-white overflow-hidden h-full"
  >
    <!-- Language Link -->
    <div class="absolute top-4 right-4 z-50">
      <a
        href="/en/posts/python-ft-strings"
        class="glass-tag px-3 py-1 rounded text-slate-400 hover:text-white text-sm font-bold transition-colors"
      >
        EN
      </a>
    </div>

    <!-- Anatomy Section -->
    <RadiographyHeader
      categoryText="Python 3.14 Evoluci√≥n"
      categoryColorClass="text-purple-400"
      titlePrefix="Radiograf√≠a:"
      titleHighlightText="PEP 750"
      titleHighlightColorClass="highlight-purple"
      subtitle="Template Strings vs F-Strings"
    />

    <div
      class="feature-card rounded-3xl p-6 mb-8 relative flex flex-col md:flex-row gap-8 items-stretch"
    >
      <div
        class="code-font text-lg leading-relaxed flex-1 border-r border-white/10 pr-8"
      >
        <p class="text-blue-400 font-bold text-2xl mb-2">
          // F-String (Tradicional)
        </p>
        <div class="text-lg bg-blue-950/30 p-3 rounded-lg mb-6">
          <span class="text-pink-400">f</span><span class="text-yellow-200"
            >"SQL: SELECT * FROM users WHERE id = </span
          ><span class="text-blue-300">{"{user_id}"}</span><span
            class="text-yellow-200">"</span
          ><br />
          <span class="text-slate-500 text-md italic"
            ># Produce inmediatamente un 'str' vulnerable.</span
          >
        </div>

        <p class="text-purple-400 font-bold text-2xl mb-2">
          // T-String (PEP 750)
        </p>
        <div class="text-lg bg-purple-950/30 p-3 rounded-lg">
          <span class="text-pink-400">t</span><span class="text-yellow-200"
            >"SQL: SELECT * FROM users WHERE id = </span
          ><span class="text-purple-300">{"{user_id}"}</span><span
            class="text-yellow-200">"</span
          ><br />
          <span class="text-slate-500 text-md italic"
            ># Produce un objeto 'Template' con estructura.</span
          >
        </div>
      </div>

      <RadiographyLegend
        items={[
          {
            bgColor: "bg-blue-500",
            shadowRgba: "rgba(14,165,233,0.5)",
            textColor: "text-blue-400",
            title: "F-Strings",
            description:
              "Interpola y concatena al instante. <br>Pierde el contexto de los datos.",
          },
          {
            bgColor: "bg-purple-500",
            shadowRgba: "rgba(139,92,246,0.5)",
            textColor: "text-purple-400",
            title: "T-Strings",
            description:
              'Mantiene texto y variables <br>separados para un "Processor".',
          },
          {
            bgColor: "bg-emerald-500",
            shadowRgba: "rgba(16,185,129,0.5)",
            textColor: "text-emerald-400",
            title: "Seguridad Nativa",
            description:
              "Permite escapar HTML o SQL <br>antes de generar el string final.",
          },
        ]}
        gap="gap-8"
        minWidth="min-w-[280px]"
      />
    </div>

    <!-- Comparison Section (VS) -->
    <div class="relative z-10 flex flex-col md:flex-row p-0 md:p-10 gap-10 mb-8">
      <div class="flex-1 flex flex-col items-center">
        <div
          class="bg-blue-600 text-white rounded-3xl p-6 w-full text-center shadow-lg mb-6"
        >
          <h2 class="text-4xl md:text-6xl font-black italic mb-1">f-strings</h2>
          <p class="text-xl font-bold opacity-90 uppercase tracking-widest">
            Formatted Strings
          </p>
          <p class="text-sm opacity-75 mt-1">Python 3.6+</p>
        </div>
        <p class="text-center text-blue-400 font-semibold text-lg px-4 mb-8">
          Interpolaci√≥n literal de expresiones en tiempo de ejecuci√≥n.
        </p>

        <ul class="w-full space-y-4">
          <li
            class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-blue-500/30"
          >
            <span class="text-3xl">üöÄ</span>
            <span class="text-blue-300 font-medium text-xl"
              >Extremadamente r√°pidas</span
            >
          </li>
          <li
            class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-blue-500/30"
          >
            <span class="text-3xl">üìù</span>
            <span class="text-blue-300 font-medium text-xl"
              >Sintaxis muy legible</span
            >
          </li>
          <li
            class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-blue-500/30"
          >
            <span class="text-3xl">‚ö°</span>
            <span class="text-blue-300 font-medium text-xl"
              >Evaluaci√≥n inmediata</span
            >
          </li>
        </ul>
      </div>

      <div class="flex-1 flex flex-col items-center">
        <div
          class="bg-purple-600 text-white rounded-3xl p-6 w-full text-center shadow-lg mb-6"
        >
          <h2 class="text-4xl md:text-6xl font-black italic mb-1">t-strings</h2>
          <p class="text-xl font-bold opacity-90 uppercase tracking-widest">
            Template Strings
          </p>
          <p class="text-sm opacity-75 mt-1">PEP 750 (Python 3.14)</p>
        </div>
        <p
          class="text-center text-purple-400 font-semibold text-lg px-4 mb-8"
        >
          Acceso estructural a variables y texto antes de ser combinados.
        </p>
        <ul class="w-full space-y-4">
          <li
            class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-purple-500/30"
          >
            <span class="text-3xl">üõ°Ô∏è</span>
            <span class="text-purple-300 font-medium text-xl"
              >Sanitizaci√≥n profunda</span
            >
          </li>
          <li
            class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-purple-500/30"
          >
            <span class="text-3xl">üß©</span>
            <span class="text-purple-300 font-medium text-xl"
              >Desacopla l√≥gica de texto</span
            >
          </li>
          <li
            class="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-purple-500/30"
          >
            <span class="text-3xl">üîí</span>
            <span class="text-purple-300 font-medium text-xl"
              >Seguridad contra Inyecci√≥n</span
            >
          </li>
        </ul>
      </div>
    </div>

    <div class="relative z-10 px-0 md:px-12 mt-0 mb-10">
      <div
        class="bg-slate-900 rounded-3xl shadow-xl overflow-hidden border border-slate-700"
      >
        <div
          class="bg-slate-800 text-white text-center py-3 font-bold tracking-widest text-xl uppercase"
        >
          Diferencias Clave
        </div>
        <table class="w-full text-left text-lg">
          <tr class="border-b border-slate-700">
            <th class="p-4 bg-slate-800/50 font-bold text-slate-400 w-1/4"
              >Resultado</th
            >
            <td class="p-4 font-semibold text-blue-400 w-1/3"
              >Un string (`str`)</td
            >
            <td class="p-4 font-semibold text-purple-400 w-1/3 italic"
              >Un objeto (`Template`)</td
            >
          </tr>
          <tr class="border-b border-slate-700">
            <th class="p-4 bg-slate-800/50 font-bold text-slate-400"
              >Procesamiento</th
            >
            <td class="p-4 font-semibold text-blue-400"
              >Autom√°tico e inmediato</td
            >
            <td class="p-4 font-semibold text-purple-400 italic"
              >Manual (v√≠a Processor)</td
            >
          </tr>
          <tr>
            <th class="p-4 bg-slate-800/50 font-bold text-slate-400"
              >Uso Ideal</th
            >
            <td class="p-4 font-semibold text-blue-400"
              >Prints y logs r√°pidos</td
            >
            <td class="p-4 font-semibold text-purple-400 italic"
              >Consultas SQL y HTML</td
            >
          </tr>
        </table>
      </div>
    </div>

    <!-- Processor Section (Deep Dive) -->
    <div
      class="feature-card rounded-3xl p-10 mb-8 relative flex flex-col md:flex-row gap-8 items-stretch"
    >
      <div
        class="code-font text-lg leading-relaxed flex-1 border-r border-white/10 pr-8"
      >
        <p
          class="text-purple-400 font-bold text-3xl underline decoration-purple-400/20"
        >
          # El Processor
        </p>
        <p class="text-slate-400 mt-1 italic font-medium">
          &gt; C√≥mo se consumen las t-strings
        </p>

        <div class="code-block p-6 rounded-2xl mt-4 font-mono text-sm">
          <p>
            <span class="text-blue-400">def</span>
            <span class="text-emerald-400">render_sql</span>(template:
            Template):
          </p>
          <p class="pl-4 text-slate-500"># Mantiene texto y valores separados</p>
          <p class="pl-4">
            <span class="text-pink-400">for</span> item <span
              class="text-pink-400">in</span
            > template:
          </p>
          <p class="pl-8 text-pink-400">
            match <span class="text-white">item:</span>
          </p>
          <p class="pl-12 text-slate-300">
            case <span class="text-yellow-400">str</span>(): <span
              class="text-slate-500"># Parte fija</span
            >
          </p>
          <p class="pl-12 text-slate-300">
            case <span class="text-yellow-400">Interpolation</span>(val): <span
              class="text-slate-500"># Sanitizar val</span
            >
          </p>
        </div>

        <p class="text-slate-200 font-bold text-2xl mt-6">## Resultado</p>
        <p>
          <span class="text-purple-400 font-bold">- t"SELECT..."</span>
          <span class="text-slate-400">‚Üí Objeto Template</span>
        </p>
        <p>
          <span class="text-blue-400 font-bold">- f"SELECT..."</span>
          <span class="text-slate-400">‚Üí String Vulnerable</span>
        </p>
      </div>

      <RadiographyLegend
        items={[
          {
            bgColor: "bg-purple-500",
            shadowRgba: "rgba(167,139,250,0.5)",
            textColor: "text-purple-400",
            title: "Objeto Template",
            description:
              "No es texto, es una estructura <br>de datos (strings + values).",
          },
          {
            bgColor: "bg-blue-500",
            shadowRgba: "rgba(14,165,233,0.5)",
            textColor: "text-blue-400",
            title: "Interpolation",
            description:
              "Contiene el valor, la expresi√≥n <br>original y el formato (:2f).",
          },
          {
            bgColor: "bg-emerald-500",
            shadowRgba: "rgba(16,185,129,0.5)",
            textColor: "text-emerald-400",
            title: "Zero-Injection",
            description:
              "La seguridad es nativa porque <br>el processor escapa los datos.",
          },
        ]}
        gap="gap-8"
        minWidth="min-w-[280px]"
      />
    </div>

    <!-- Final Details -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start mb-auto">
      <div class="space-y-4">
        <div class="glass-tag-purple p-5 rounded-xl">
          <h4
            class="highlight-purple font-bold text-lg uppercase tracking-widest mb-1"
          >
            El Cambio de Paradigma
          </h4>
          <p class="text-slate-200 leading-snug">
            A diferencia de las f-strings, <span class="font-bold text-white"
              >t-strings</span
            > no asumen que el destino final es un simple string. El destino puede
            ser un objeto de base de datos o un nodo HTML.
          </p>
        </div>
        <div class="glass-tag-purple p-5 rounded-xl">
          <h4
            class="highlight-purple font-bold text-lg uppercase tracking-widest mb-1"
          >
            Seguridad por Dise√±o
          </h4>
          <p class="text-slate-200 leading-snug text-md">
            Al no concatenar autom√°ticamente, <span class="italic text-white"
              >SQL Injection</span
            > y <span class="italic text-white">XSS</span> ataques se eliminan de
            ra√≠z en el core del lenguaje.
          </p>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div class="feature-card p-6 rounded-2xl border-l-2 border-purple-500">
          <h3 class="highlight-purple font-bold text-xl mb-2">Ansioso</h3>
          <p class="text-slate-400 text-md">
            Las variables se eval√∫an al momento (eager), igual que las
            f-strings.
          </p>
        </div>
        <div class="feature-card p-6 rounded-2xl border-l-2 border-purple-500">
          <h3 class="highlight-purple font-bold text-xl mb-2">Inmutables</h3>
          <p class="text-slate-400 text-md">
            Tanto el Template como sus Interpolations no pueden modificarse.
          </p>
        </div>
        <div class="feature-card p-6 rounded-2xl border-l-2 border-purple-500">
          <h3 class="highlight-purple font-bold text-xl mb-2">Format Spec</h3>
          <p class="text-slate-400 text-md">
            Soporta <span class="code-font text-white">:.2f</span> y otros modificadores
            para el processor.
          </p>
        </div>
        <div class="feature-card p-6 rounded-2xl border-l-2 border-purple-500">
          <h3 class="highlight-purple font-bold text-xl mb-2">Raw Support</h3>
          <p class="text-slate-400 text-md">
            Soporta el prefijo <span class="code-font text-white">rt""</span> para
            expresiones regulares seguras.
          </p>
        </div>
      </div>
    </div>

    <PostFooterBar
      middleHtml='<span class="text-blue-400 font-black italic">f-strings</span> formatean ‚Ä¢ <span class="text-purple-400 font-black italic">t-strings</span> deconstruyen ‚Ä¢ <span class="text-emerald-400 font-black italic">Python 3.14</span> asegura.'
      rightHtml='<span class="text-slate-400 font-black italic">Adi√≥s inyecciones.</span>'
    />
  </div>

  <style>
    .feature-card {
      background: rgba(139, 92, 246, 0.03);
      border: 1px solid rgba(139, 92, 246, 0.1);
    }
    .glass-tag,
    .glass-tag-purple {
      background: rgba(14, 165, 233, 0.05);
      border: 1px solid rgba(14, 165, 233, 0.2);
    }
    .glass-tag-purple {
      background: rgba(167, 139, 250, 0.05);
      border: 1px solid rgba(167, 139, 250, 0.2);
    }
    .highlight-purple {
      color: #a78bfa;
    }
    .code-block {
      background: #020617;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }
  </style>
</BlogPostLayout>
