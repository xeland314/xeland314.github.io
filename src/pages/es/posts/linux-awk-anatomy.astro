---
import BlogPostLayout from "../../../layouts/BlogPostLayout.astro";
import RadiographyHeader from "../../../components/blog/RadiographyHeader.astro";
import RadiographyLegend from "../../../components/blog/RadiographyLegend.astro";
import PostFooterBar from "../../../components/blog/PostFooterBar.astro";

const title = "AWK Anatomy";
const description = "Radiografía: Estructura del comando AWK - Procesamiento de archivos línea por línea";
---

<BlogPostLayout
  title={title}
  description={description}
  bgColor="bg-slate-950"
  extraFonts="&family=Fira+Code:wght@400;700"
  lang="es"
>
  <div class="relative p-8 md:p-12 flex flex-col text-white overflow-hidden h-full">
    <div class="absolute top-4 right-4 z-50">
      <a href="/en/posts/linux-awk-anatomy" class="glass-tag px-3 py-1 rounded text-slate-400 hover:text-white text-sm font-bold transition-colors">EN</a>
    </div>

    <RadiographyHeader
      categoryText="Herramientas Linux"
      categoryColorClass="text-amber-400"
      titlePrefix="Radiografía:"
      titleHighlightText="AWK"
      titleHighlightColorClass="highlight-amber"
      subtitle="Escaneo y Procesamiento de Patrones"
    />

    <div class="feature-card rounded-3xl p-6 md:p-8 mb-6 relative flex flex-col">
      <div class="font-mono text-sm md:text-lg bg-black/40 p-6 rounded-xl border border-white/5 leading-relaxed mb-6">
        <span class="text-slate-500">awk '</span><br/>
        <span class="text-rose-400 font-bold">BEGIN</span> {"{"} <span class="text-rose-300">FS=":"</span> {"}"} <br/>
        <span class="text-sky-400 font-bold">$3 &gt; 100</span> {"{"} <span class="text-sky-300">print $1</span> {"}"} <br/>
        <span class="text-emerald-400 font-bold">END</span> {"{"} <span class="text-emerald-300">print "Fin"</span> {"}"} <br/>
        <span class="text-slate-500">' /etc/passwd</span>
      </div>

      <RadiographyLegend
        items={[
          {
            bgColor: "bg-rose-500",
            shadowRgba: "rgba(244,63,94,0.5)",
            textColor: "text-rose-400",
            title: "BEGIN (Inicio)",
            description: "Se ejecuta una vez al inicio. <br>Ideal para definir el FS (separador).",
          },
          {
            bgColor: "bg-sky-500",
            shadowRgba: "rgba(14,165,233,0.5)",
            textColor: "text-sky-400",
            title: "Patrón / Acción",
            description: "Condición ($3 > 100) y <br>acción (print) por cada línea.",
          },
          {
            bgColor: "bg-emerald-500",
            shadowRgba: "rgba(16,185,129,0.5)",
            textColor: "text-emerald-400",
            title: "END (Final)",
            description: "Se ejecuta una vez al terminar <br>de procesar todas las líneas.",
          },
        ]}
        gap="gap-6"
        minWidth="min-w-[220px]"
      />
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start mb-auto">
      <div class="space-y-4">
        <div class="glass-tag p-4 rounded-xl border-l-4 border-amber-500">
          <h4 class="text-amber-400 font-bold text-sm uppercase mb-1">Variables de Campo</h4>
          <p class="text-slate-300 text-xs">
            <span class="text-white font-bold">$0</span>: La línea completa.<br/>
            <span class="text-white font-bold">$1, $2, ...</span>: Columnas específicas según el separador.
          </p>
        </div>
        <div class="glass-tag p-4 rounded-xl border-l-4 border-blue-400">
          <h4 class="text-blue-400 font-bold text-sm uppercase mb-1">Contadores</h4>
          <p class="text-slate-300 text-xs">
            <span class="text-white font-bold">NR</span>: (Number of Record) Número de línea actual.<br/>
            <span class="text-white font-bold">NF</span>: (Number of Fields) Cantidad de columnas en la línea.
          </p>
        </div>
      </div>

      <div class="grid grid-cols-2 gap-3">
        <div class="feature-card p-4 rounded-xl">
          <h3 class="text-amber-400 font-bold text-sm mb-1">Línea a Línea</h3>
          <p class="text-slate-400 text-[10px]">AWK procesa el archivo registro por registro de forma secuencial.</p>
        </div>
        <div class="feature-card p-4 rounded-xl">
          <h3 class="text-amber-400 font-bold text-sm mb-1">Poder de C</h3>
          <p class="text-slate-400 text-[10px]">Soporta loops (for, while) e if/else como el lenguaje C.</p>
        </div>
        <div class="feature-card p-4 rounded-xl">
          <h3 class="text-amber-400 font-bold text-sm mb-1">Regex</h3>
          <p class="text-slate-400 text-[10px]">Los patrones pueden ser expresiones regulares: /error/ {"{...}"}</p>
        </div>
        <div class="feature-card p-4 rounded-xl">
          <h3 class="text-amber-400 font-bold text-sm mb-1">Filtrado</h3>
          <p class="text-slate-400 text-[10px]">Extremadamente rápido para extraer datos de logs y CSVs.</p>
        </div>
      </div>
    </div>

    <PostFooterBar
      middleHtml='<span class="text-rose-400 font-black italic">BEGIN</span> • <span class="text-sky-400 font-black italic">BODY</span> • <span class="text-emerald-400 font-black italic">END</span>'
    />
  </div>

  <style>
    .feature-card { background: rgba(245, 158, 11, 0.03); border: 1px solid rgba(245, 158, 11, 0.1); }
    .glass-tag { background: rgba(245, 158, 11, 0.05); border: 1px solid rgba(245, 158, 11, 0.2); }
    .highlight-amber { color: #f59e0b; }
  </style>
</BlogPostLayout>
