---
import { db, MyCertificates, asc, eq, and } from "astro:db";
import CertificatesCard from "../certificates/CertificatesCard.astro";

const { lang = "es" } = Astro.props;

// Textos traducibles
const texts: Record<string, { title: string; button: string }> = {
  es: {
    title: "Mis Certificados",
    button: "Ver Todos los Certificados",
  },
  en: {
    title: "My Certificates",
    button: "View All Certificates",
  },
};

const certificates = await db
  .select()
  .from(MyCertificates)
  .where(
    and(eq(MyCertificates.isFeatured, true), eq(MyCertificates.lang, lang)),
  )
  .orderBy(asc(MyCertificates.date));

const T = texts[lang];
---

<section id="certificates" class="max-w-7xl mx-auto px-6 py-12 bg-gray-50 dark:bg-gray-900">
  <div
    class="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-4"
  >
    <div>
      <h2
        class="text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white"
      >
        {T.title}
      </h2>
      <div class="h-1.5 w-60 bg-blue-600 mt-2 rounded-full"></div>
    </div>
    <a
      href={`/${lang}/certificates`}
      class="text-blue-600 dark:text-blue-400 font-medium hover:underline flex items-center"
    >
      {T.button}
      <svg
        class="w-4 h-4 ml-1"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"><path d="M9 5l7 7-7 7"></path></svg
      >
    </a>
  </div>

  <CertificatesCard certificates={certificates} lang={lang} />
</section>
