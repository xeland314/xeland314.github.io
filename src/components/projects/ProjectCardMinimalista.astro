---
// src/components/ProjectCard.astro

interface Props {
  project: {
    title: string;
    description: string;
    shortDescription: string;
    githubLink?: string | null | undefined;
    demoLink?: string | null | undefined;
    tags: string[] | unknown;
    image?: string | undefined | null;
    slug: string;
  };
  lang?: "es" | "en";
}

const { project, lang = "es" } = Astro.props;

const texts = {
  es: {
    repository: "c√≥digo",
    demo: "demo",
  },
  en: {
    repository: "code",
    demo: "demo",
  },
};

const T = texts[lang];
const detailsPageLink = `/${lang}/projects/${project.slug}`;
---

<article
  class="group relative border-l-2 border-gray-200 dark:border-gray-700 pl-4 py-3 hover:border-blue-500 dark:hover:border-blue-400 transition-colors duration-200"
>
  <div class="flex items-start justify-between gap-4 mb-2">
    <h3 class="text-lg font-semibold text-gray-900 dark:text-white font-mono">
      <a
        href={detailsPageLink}
        class="hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
      >
        {project.title}
      </a>
    </h3>

    <div class="flex items-center gap-3 flex-shrink-0">
      {
        project.githubLink && (
          <a
            href={project.githubLink}
            target="_blank"
            rel="noopener noreferrer"
            class="text-xs text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-mono"
            title={T.repository}
          >
            [{T.repository}]
          </a>
        )
      }
      {
        project.demoLink && (
          <a
            href={project.demoLink}
            target="_blank"
            rel="noopener noreferrer"
            class="text-xs text-gray-500 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors font-mono"
            title={T.demo}
          >
            [{T.demo}]
          </a>
        )
      }
    </div>
  </div>

  <p class="text-sm text-gray-600 dark:text-gray-300 mb-3 leading-relaxed">
    {project.shortDescription || project.description}
  </p>
  <div class="flex flex-wrap gap-2">
    {
      (project.tags as string[]).map((tag) => (
        <span class="text-xs text-gray-500 dark:text-gray-400 font-mono">
          #{tag}
        </span>
      ))
    }
  </div>
</article>
